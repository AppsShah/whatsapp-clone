(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{53:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},75:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},87:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c(2),s=c.n(n),r=c(30),i=c.n(r),o=(c(72),c(16)),l=(c(73),c(47)),j=c.n(l),d=c(54),u=c(102),b=c(100),h=c(43),m=c.n(h),p=c(44),O=c.n(p),x=c(58),f=c.n(x),v=c(10),g=c(60),S=c.n(g),N=(c(75),c(26)),y=N.a.initializeApp({apiKey:"AIzaSyDGBtif6xt9ZBQ94KgR-DVQRYoq52EJ7yk",authDomain:"whatsapp-clone-7b9d5.firebaseapp.com",projectId:"whatsapp-clone-7b9d5",storageBucket:"whatsapp-clone-7b9d5.appspot.com",messagingSenderId:"434250059040",appId:"1:434250059040:web:f69c6c729675d5975a9b45",measurementId:"G-P8EQ0XRDC0"}),w=N.a.firestore(),C=N.a.auth(),_=new N.a.auth.GoogleAuthProvider,D=w,k=c(59),I=c.n(k);var E=function(e){var t,c,s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],h=Object(n.useState)(""),p=Object(o.a)(h,2),x=p[0],g=p[1],w=Object(n.useState)(""),C=Object(o.a)(w,2),_=C[0],k=C[1],E=Object(v.f)().roomId,R=Object(n.useState)([]),T=Object(o.a)(R,2),B=T[0],z=T[1],F=Object(n.useState)(null),M=Object(o.a)(F,2),U=M[0],G=M[1];function P(){return(P=Object(d.a)(j.a.mark((function e(t){var c,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=t.target.files[0],a=y.storage().ref(),n=a.child(c.name),e.next=6,n.put(c);case 6:return e.t0=G,e.next=9,n.getDownloadURL();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){E&&(D.collection("rooms").doc(E).onSnapshot((function(e){k(e.data().name)})),g(Math.floor(100*Math.random())),D.collection("rooms").doc(E).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){z(e.docs.map((function(e){return e.data()})))})))}),[E]),Object(n.useEffect)((function(){null!=U&&D.collection("rooms").doc(E).collection("messages").add({message:"",name:e.username,url:U,timestamp:N.a.firestore.FieldValue.serverTimestamp()})}),[U]),Object(a.jsxs)("div",{className:"chat",children:[Object(a.jsxs)("div",{className:"chat_header",children:[Object(a.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(x,".svg")}),Object(a.jsxs)("div",{className:"chat_headerInfo",children:[Object(a.jsx)("h3",{children:_}),Object(a.jsx)("p",{children:new Date(null===(t=B[B.length-1])||void 0===t||null===(c=t.timestamp)||void 0===c?void 0:c.toDate()).toUTCString()})]}),Object(a.jsxs)("div",{className:"chat_headerRight",children:[Object(a.jsx)(b.a,{children:Object(a.jsx)(m.a,{})}),Object(a.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:Object(a.jsxs)(b.a,{type:"submit",children:[Object(a.jsx)("input",{id:"upload",type:"file",accept:"image/jpeg,image/gif,image/png,application/pdf,image/x-eps",onChange:function(e){return P.apply(this,arguments)},style:{display:"none"}}),Object(a.jsx)("label",{for:"upload",children:Object(a.jsx)(f.a,{})})]})}),Object(a.jsx)(b.a,{onClick:function(e){e.preventDefault(),console.log(e.target.value)},children:Object(a.jsx)(O.a,{})})]})]}),Object(a.jsx)("div",{className:"chat_body",children:B.map((function(t){var c;return Object(a.jsxs)("div",{className:"chat_messagebody ".concat(t.name===e.username&&"chat_reciever"),children:[Object(a.jsx)("span",{className:"chat_name",children:t.name}),""!==t.url&&Object(a.jsx)("iframe",{scrolling:"no",src:t.url,frameborder:"0"}),""!==t.url&&Object(a.jsx)("a",{href:t.url,onClick:function(e){e.preventDefault(),alert("please download on next page")},children:Object(a.jsx)(b.a,{download:!0,children:Object(a.jsx)(I.a,{})})}),Object(a.jsx)("p",{children:t.message}),Object(a.jsx)("span",{className:"chat_timestamp",children:new Date(null===(c=t.timestamp)||void 0===c?void 0:c.toDate()).toUTCString()})]})}))}),Object(a.jsxs)("div",{className:"chat_footer",children:[Object(a.jsx)(S.a,{}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{value:i,onChange:function(e){l(e.target.value)},type:"text",placeholder:"Type here"}),Object(a.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),D.collection("rooms").doc(E).collection("messages").add({message:i,name:e.username,url:"",timestamp:N.a.firestore.FieldValue.serverTimestamp()}),l("")},children:"Send"})]})]})]})},R=(c(84),c(61)),T=c.n(R),B=c(62),z=c.n(B),F=c(35);c(53);var M=function(e){var t,c=Object(n.useState)([]),s=Object(o.a)(c,2),r=s[0],i=s[1],l=Object(n.useState)(""),j=Object(o.a)(l,2),d=j[0],b=j[1];return Object(n.useEffect)((function(){b(Math.floor(100*Math.random()))}),[]),Object(n.useEffect)((function(){e.id&&D.collection("rooms").doc(e.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){i(e.docs.map((function(e){return e.data()})))}))}),[]),Object(a.jsx)(F.b,{to:"/rooms/".concat(e.id),children:Object(a.jsxs)("div",{className:"sidebarChat",children:[Object(a.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(a.jsxs)("div",{className:"sidebarChat_info",children:[Object(a.jsx)("h2",{children:e.name}),Object(a.jsx)("p",{children:null===(t=r[0])||void 0===t?void 0:t.message})]})]})})};function U(){var e=prompt("Create New Chat");e&&D.collection("rooms").add({name:e})}var G=function(e){var t=Object(n.useState)([]),c=Object(o.a)(t,2),s=c[0],r=c[1];return Object(n.useEffect)((function(){var e=D.collection("rooms").onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsxs)("div",{className:"sidebar_header",children:[Object(a.jsx)(u.a,{src:e.imgurl}),Object(a.jsxs)("div",{className:"side_headerRight",children:[Object(a.jsx)(b.a,{children:Object(a.jsx)(T.a,{fontSize:"small"})}),Object(a.jsx)(b.a,{onClick:U,children:Object(a.jsx)(z.a,{fontSize:"small"})}),Object(a.jsx)(b.a,{children:Object(a.jsx)(O.a,{fontSize:"small"})})]})]}),Object(a.jsx)("div",{className:"sidebar_search",children:Object(a.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(a.jsx)(m.a,{}),Object(a.jsx)("input",{placeholder:"search Chat",type:"text"})]})}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{className:"sidebar_chats",children:s.map((function(e){return Object(a.jsx)(M,{id:e.id,name:e.data.name},e.id)}))})]})})},P=c(101),A=(c(85),c.p+"static/media/whatsapp.965d92ce.png"),J=c(50),Q="SET_USER",V=function(e,t){switch(t.type){case Q:return Object(J.a)(Object(J.a)({},e),{},{user:t.user});default:return e}},W=Object(n.createContext)(),K=function(e){var t=e.reducer,c=e.initialstate,s=e.children;return Object(a.jsx)(W.Provider,{value:Object(n.useReducer)(t,c),children:s})},L=function(){return Object(n.useContext)(W)};var q=function(){var e=L(),t=Object(o.a)(e,2),c=(t[0],t[1]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"login",children:Object(a.jsxs)("div",{className:"login_container",children:[Object(a.jsx)("img",{src:A,alt:""}),Object(a.jsx)("div",{className:"login_text",children:Object(a.jsx)("h1",{children:"Sign in to Whatsapp-clone"})}),Object(a.jsx)("div",{children:Object(a.jsx)(P.a,{style:{marginTop:"50px",textTransform:"inherit  !important",backgroundColor:"#0a8d48",color:"white"},onClick:function(){C.signInWithPopup(_).then((function(e){c({type:Q,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In With Google"})})]})})})};var X=function(){var e=L(),t=Object(o.a)(e,1)[0];return null==t?Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(q,{})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"app",children:Object(a.jsx)("div",{className:"app_body",children:Object(a.jsxs)(F.a,{children:[Object(a.jsx)(G,{imgurl:t.user.photoURL}),Object(a.jsxs)(v.c,{children:[Object(a.jsx)(v.a,{path:"/rooms/:roomId",children:Object(a.jsx)(E,{username:t.user.displayName})}),Object(a.jsx)(v.a,{path:"/app",children:Object(a.jsx)(E,{})}),Object(a.jsx)(v.a,{path:"/",children:Object(a.jsx)(E,{})})]})]})})})})};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(K,{initialState:{user:null},reducer:V,children:Object(a.jsx)(X,{})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.a50b1575.chunk.js.map